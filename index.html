<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
        />

        <title>reveal.js</title>

        <link rel="stylesheet" href="css/reset.css" />
        <link rel="stylesheet" href="css/reveal.css" />
        <link rel="stylesheet" href="css/theme/night.css" />

        <!-- Theme used for syntax highlighting of code -->
        <link rel="stylesheet" href="lib/css/monokai.css" />

        <link rel="stylesheet" href="css/site.css" />

        <!-- Printing and PDF exports -->
        <script>
            var link = document.createElement("link");
            link.rel = "stylesheet";
            link.type = "text/css";
            link.href = window.location.search.match(/print-pdf/gi)
                ? "css/print/pdf.css"
                : "css/print/paper.css";
            document.getElementsByTagName("head")[0].appendChild(link);
        </script>
    </head>
    <body>
        <div class="reveal">
            <div class="slides">
                <section>
                    <h1>
                        Fun with TypeScript
                    </h1>
                </section>

                <section>
                    <h2 class="fragment">What TypeScript Is</h2>
                    <h2 class="fragment">How to Use It</h2>
                    <h2 class="fragment">Why It's Awesome</h2>
                </section>

                <section data-background-image="img/bliss-720.jpg"></section>
                <section data-background-image="img/bliss-720-brown.jpg">
                    <img
                        class="fragment plain"
                        src="img/corgibytes-logo.png"
                        width="98"
                        height="158"
                    />
                </section>

                <section>
                    <h2>What TypeScript Is</h2>
                </section>

                <section>
                    <p>JavaScript</p>
                    <p class="fragment">with types</p>
                    <p class="fragment">(exactly what it says on the tin)</p>
                </section>

                <section data-transition="fade-out">
                    <pre><code data-trim>
function greeter(person) {
    return "Hello, " + person;
}

let user = "Jane User";

document.body.textContent = greeter(user);
                    </code></pre>
                    <a
                        href="http://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes.html"
                    >
                        TypeScript in 5 Minutes
                    </a>
                </section>

                <section data-transition="fade-in fade-out">
                    <pre><code data-trim>
function greeter(person: string) {
    return "Hello, " + person;
}

let user = "Jane User";

document.body.textContent = greeter(user);
                    </code></pre>
                    <a
                        href="http://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes.html"
                    >
                        TypeScript in 5 Minutes
                    </a>
                </section>

                <section data-transition="fade-in fade-out">
                    <pre><code data-trim>
interface Person {
    firstName: string;
    lastName: string;
}

function greeter(person: Person) {
    return "Hello, " + person.firstName + " " + person.lastName;
}

let user = { firstName: "Jane", lastName: "User" };

document.body.textContent = greeter(user);
                    </code></pre>
                    <a
                        href="http://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes.html"
                    >
                        TypeScript in 5 Minutes
                    </a>
                </section>

                <section data-transition="fade-in fade-out">
                    <pre><code data-trim>
class Student {
    fullName: string;
    constructor(
        public firstName: string,
        public middleInitial: string,
        public lastName: string
    ) {
        this.fullName = firstName + " "
            + middleInitial + " "
            + lastName;
    }
}

interface Person {
    firstName: string;
    lastName: string;
}

function greeter(person: Person) {
    return "Hello, " + person.firstName + " " + person.lastName;
}

let user = new Student("Jane", "M.", "User");

document.body.textContent = greeter(user);
                    </code></pre>
                    <a
                        href="http://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes.html"
                    >
                        TypeScript in 5 Minutes
                    </a>
                </section>

                <section data-transition="fade-in fade-out">
                    <pre><code data-trim>
"use strict";
class Student {
    constructor(firstName, middleInitial, lastName) {
        this.firstName = firstName;
        this.middleInitial = middleInitial;
        this.lastName = lastName;
        this.fullName = firstName + " "
            + middleInitial + " "
            + lastName;
    }
}
function greeter(person) {
    return "Hello, " + person.firstName + " " + person.lastName;
}
let user = new Student("Jane", "M.", "User");
document.body.textContent = greeter(user);
                    </code></pre>
                    <a
                        href="http://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes.html"
                    >
                        TypeScript in 5 Minutes
                    </a>
                </section>

                <section>
                    <h3>Important Concepts</h3>
                    <ul>
                        <li class="fragment">It goes away at runtime.</li>
                        <li class="fragment">
                            <a
                                href="https://www.typescriptlang.org/docs/handbook/type-compatibility.html#a-note-on-soundness"
                            >
                                It is not sound.
                            </a>
                        </li>
                        <li class="fragment">It's 90% modern JavaScript.</li>
                        <li class="fragment">
                            The other 10% is just types.
                            <p class="muted">
                                (I'm making up those percentages.)
                            </p>
                        </li>
                    </ul>
                    <aside class="notes">
                        "Chances are that if it type-checks, it's correct."
                    </aside>
                </section>

                <section>
                    <h2>How to Use It</h2>
                </section>

                <section>
                    <h3>Trying It Out</h3>

                    <p class="fragment">
                        <a href="http://www.typescriptlang.org/play/">
                            The TypeScript Playground
                        </a>
                    </p>

                    <p class="fragment"><code>ts-node</code></p>
                </section>

                <section>
                    <h3>Compiling TypeScript</h3>

                    <ol>
                        <li class="fragment">
                            tsc, the TypeScript compiler
                            <ul class="fragment">
                                <li>ts-loader (what I use)</li>
                                <li>awesome-typescript-loader</li>
                            </ul>
                        </li>
                        <li class="fragment">
                            Babel 7
                            <ul class="fragment">
                                <li>tsc --noEmit</li>
                            </ul>
                        </li>
                    </ol>
                </section>

                <section>
                    <h3>Compiling TypeScript</h3>

                    <ol>
                        <li class="fragment">
                            Start with a generator (
                            <code>create-react-app</code>
                            ), boilerplate, etc.
                        </li>
                        <li class="fragment">
                            Modify it as needed for your project
                        </li>
                        <li class="fragment">
                            Grumble and complain when things don't work
                        </li>
                        <li class="fragment">
                            Copy and paste new configurations from Stack
                            Overflow or other projects
                        </li>
                        <li class="fragment">
                            Check it in and hope you never have to touch it
                            again
                        </li>
                    </ol>
                </section>

                <section>
                    <h3>tsconfig.json</h3>
                    <pre><code class="json" data-trim>
{
  "compilerOptions": {
    "target": "es5",

    "alwaysStrict": true,
    "strictNullChecks": true,
    "noImplicitAny": true,
    "noImplicitReturns": true,
    "noImplicitThis": true,
    "noUnusedLocals": true
  }
}
                    </code></pre>
                </section>

                <section>
                    <h3>Getting Type Definitions</h3>
                    <a
                        href="https://github.com/DefinitelyTyped/DefinitelyTyped"
                    >
                        https://github.com/DefinitelyTyped/DefinitelyTyped
                    </a>

                    <pre><code class="sh" data-trim>
# Install Node package for processing command-line arguments
yarn add yargs
# Install the types for it
yarn add --dev @types/yargs
                    </code></pre>
                </section>

                <section>
                    <h3>Getting Type Definitions</h3>
                    <pre><code class="json" data-trim>
{
    "devDependencies": {
        "@types/yargs": "^13.0"
    },
    "dependencies": {
        "yargs": "^13.2.2"
    }
}
                    </code></pre>
                </section>

                <section>
                    <h3>Getting Type Definitions</h3>
                    <pre><code class="sh" data-trim>
# Install Node package for HTTP client
yarn add axios
# Install the types for it
yarn add --dev @types/axios
                    </code></pre>
                    <pre class="fragment"><code class="no-highlight" data-trim>
warning @types/axios@0.14.0: This is a stub types definition for
axios (https://github.com/mzabriskie/axios). axios provides its
own type definitions, so you don't need @types/axios installed!
                    </code></pre>
                    <pre class="fragment"><code class="sh" data-trim>
# Groovy. Never mind, then.
yarn remove @types/axios
                    </code></pre>
                </section>

                <section>
                    <h3>Getting Type Definitions</h3>
                    <p>A snippet of axios's package.json</p>
                    <pre><code data-trim>
{
    "typings": "./index.d.ts"
}
                    </code></pre>
                </section>

                <section>
                    <h3>If You Don't Have Types</h3>
                    <p>The simple approach: untyped <code>require</code></p>
                    <pre><code class="typescript" data-trim>
// This is now of type `any`
const untypedModule = require('untyped-module');
                    </code></pre>
                </section>

                <section>
                    <h3>If You Don't Have Types</h3>
                    <p>
                        The proper approach: Write your own
                        <code>.d.ts</code> file
                    </p>
                    <pre><code class="typescript" data-trim>
declare module 'trie-search' {
    // Add your interfaces, types, etc. here
    namespace TrieSearch {
        // And more types
    }

    export = TrieSearch;
}
                    </code></pre>
                </section>

                <section>
                    <h3>If You Don't Have Types</h3>
                    <p>The proper approach: Write your own</p>
                    <pre><code class="json" data-trim>
{
  "include": [
    "app/**/*.ts",
    "node_modules/@types/**/*.d.ts",
    // Reference it within tsconfig.json
    "types/**/*.d.ts"
  ],
}
                    </code></pre>
                </section>

                <section>
                    <h2>Why It's Awesome</h2>
                </section>

                <section>
                    <h3>strictNullChecks</h3>
                    <pre><code data-trim>
// tsconfig.json
"strictNullChecks": true,
                    </code></pre>
                    <pre><code data-trim>
function showBanner(user: User | null) {
    // Error! User might undefined.
    alert('Hello, ' + user.name);

    if (user) {
        // Okay - within this block, user cannot be null.
        alert('Hello, ' + user.name);
    }
}
                    </code></pre>
                </section>

                <section>
                    <p style="font-size: smaller; text-align: left">
                        I call it my billion-dollar mistake. It was the
                        invention of the null reference in 1965&hellip; My goal
                        was to ensure that all use of references should be
                        absolutely safe, with checking performed automatically
                        by the compiler. But I couldn't resist the temptation to
                        put in a null reference, simply because it was so easy
                        to implement. This has led to innumerable errors,
                        vulnerabilities, and system crashes, which have probably
                        caused a billion dollars of pain and damage in the last
                        forty years.
                    </p>
                    <p>
                        &mdash;
                        <a
                            href="https://en.wikipedia.org/wiki/Tony_Hoare#Apologies_and_retractions"
                        >
                            Tony Hoare
                        </a>
                    </p>
                </section>

                <section>
                    <h3>Demo: Adding Async</h3>
                </section>

                <section data-transition="slide-in fade-out">
                    <pre><code class="typescript" data-trim>
import { IncomingMessage, ServerResponse } from 'http';

function configureProxy(
    app: connect.Server,
    proxy: httpProxy,
    getTarget: (req: IncomingMessage) => string,
) {
    app.use((req: IncomingMessage, res: ServerResponse) => {
        handleRequestInternally(req);
        const target = getTarget(req);
        proxy.web(req, res, { target });
    });
}
                    </code></pre>
                </section>

                <section data-transition="fade-in slide-out">
                    <pre><code class="typescript" data-trim>
import { IncomingMessage, ServerResponse } from 'http';

function configureProxy(
    app: connect.Server,
    proxy: httpProxy,
    getTarget: (req: IncomingMessage) => string | Promise&lt;string>,
) {
    app.use((req: IncomingMessage, res: ServerResponse) => {
        handleRequestInternally(req);
        const target = getTarget(req);
        proxy.web(req, res, { target });
    });
}
                    </code></pre>
                </section>

                <section>
                    <pre><code class="javascript" data-trim>
Promise.resolve(valueOrPromiseItDoesntMatter)
    .then(function(value) {})
                    </code></pre>
                    <a href="https://stackoverflow.com/a/27760489/25507">
                        https://stackoverflow.com/a/27760489/25507
                    </a>
                </section>

                <section>
                    <pre><code class="javascript" data-trim>
/**
 * Creates a new resolved promise for the provided value.
 * @param value A promise.
 * @returns A promise whose internal state matches the provided promise.
 */
resolve&lt;T>(value: T | PromiseLike&lt;T>): Promise&lt;T>;
                    </code></pre>
                    <p><code>lib.es2015.promise.d.ts</code></p>
                </section>

                <section data-transition="slide-in fade-out">
                    <pre><code class="typescript" data-trim>
import { IncomingMessage, ServerResponse } from 'http';

function configureProxy(
    app: connect.Server,
    proxy: httpProxy,
    getTarget: (req: IncomingMessage) => string | Promise&lt;string>,
) {
    app.use((req: IncomingMessage, res: ServerResponse) => {
        handleRequestInternally(req);
        const target = getTarget(req);
        proxy.web(req, res, { target });
    });
}
                    </code></pre>
                </section>

                <section data-transition="fade-in">
                    <pre><code class="typescript" data-trim>
import { IncomingMessage, ServerResponse } from 'http';

function configureProxy(
    app: connect.Server,
    proxy: httpProxy,
    getTarget: (req: IncomingMessage) => string | Promise&lt;string>,
) {
    app.use((req: IncomingMessage, res: ServerResponse) => {
        handleRequestInternally(req);
        Promise.resolve(getTarget(req))
            .then(target => proxy.web(req, res, { target }));
    });
}
                    </code></pre>
                </section>

                <section>
                    <h3>References</h3>

                    <ul>
                        <li>
                            <a href="https://iamturns.com/typescript-babel/">
                                TypeScript With Babel: A Beautiful Marriage
                            </a>
                        </li>
                        <li>
                            <a
                                href="https://blog.logrocket.com/choosing-between-babel-and-typescript-4ed1ad563e41/"
                            >
                                Choosing between Babel and TypeScript
                            </a>
                        </li>
                    </ul>
                </section>

                <section>
                    <h3>Credits</h3>
                    <ul>
                        <li>
                            <a
                                href="https://www.gizmodo.com.au/2014/03/an-hour-with-the-photographer-behind-windows-xps-iconic-bliss-background/"
                            >
                                Windows XP "Bliss"
                            </a>
                        </li>
                    </ul>
                </section>
            </div>
        </div>

        <script src="js/reveal.js"></script>

        <script>
            // More info about config & dependencies:
            // - https://github.com/hakimel/reveal.js#configuration
            // - https://github.com/hakimel/reveal.js#dependencies
            Reveal.initialize({
                history: true,
                dependencies: [
                    { src: "plugin/markdown/marked.js" },
                    { src: "plugin/markdown/markdown.js" },
                    { src: "plugin/notes/notes.js", async: true },
                    { src: "plugin/highlight/highlight.js", async: true }
                ]
            });
        </script>
    </body>
</html>
